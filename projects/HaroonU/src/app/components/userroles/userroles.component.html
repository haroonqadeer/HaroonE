<br/>
<!-- start menubar buttons -->
<div class="myContainer mat-elevation-z8 bgWhite">
  <div class="topnav boxShadow">
    <div>

      <span class="fa iconContainer">
        <span class="fa icon-u-userprole" ></span>
      </span>
      <h1> User Role Permissions</h1>

      <!-- <a class="pointerCursor" (click)="downloadExcel()">
        <i class="fa fa-file-excel-o"></i>
        Excel
      </a>

      <a class="pointerCursor" (click)="downloadCSV()">
        <i class="fa fa-file-text-o"></i>
        CSV
      </a>

      <a class="pointerCursor" (click)="downloadPDF()">
        <i class="fa fa-file-pdf-o"></i>
        PDF
      </a>

      <a class="pointerCursor" (click)="printDiv()">
        <i class="fa fa-print"></i>
        Print
      </a> -->

      <a class="pointerCursor" data-toggle="modal" data-target="#userRoleModal" (click)="clear()">
        <i class="fa fa-plus-circle"></i>
        ADD ROLE PERMISSIONS
      </a>

    </div>
  </div>
</div>
<!-- end menubar buttons -->

<!---------- Try Template Code Starts ---------->

<div class="myContainer bgWhite">
  <!--Start search textbox Row-->
  <div class="row">
    <div class="col-md-12">
      <div class="searchBar">
        <span class="fa icon-search"></span>
        <input class="noneOutLine menuSearchBox" type="text" maxlength="32" placeholder="Search" [(ngModel)]="tblSearch">
      </div>
    </div>
  </div>
  <!--end search textbox Row-->

  <!--Start table Row-->
  <div class="row">
    <table class="table table-striped fullwidth">
      <thead>
        <tr class="d-flex">
          <th class="col-1 text-center ">Sr No.</th>
          <th [class.active]="order === 'erpRoleName'" (click)="setOrder('erpRoleName')"
            class="col-4 pointerCursor text-left ">
            Role Name
            <span class="fa fa-angle-double-down" [hidden]="reverse"></span>
            <span class="fa fa-angle-double-up" [hidden]="!reverse"></span>
          </th>
          <th [class.active]="order === 'noOfModules'" (click)="setOrder('noOfModules')"
            class="col-3 pointerCursor text-center">
            No. of Modules
            <span class="fa fa-angle-double-down" [hidden]="reverse"></span>
            <span class="fa fa-angle-double-up" [hidden]="!reverse"></span>
          </th>
          <th class="col-2 text-center">Edit</th>
          <th class="col-2 text-center">Delete</th>
        </tr>
      </thead>
      <tbody>
        <!-- <tr *ngFor="let item of userDetail | search:'UserName,Email': query" class='d-flex'> -->
        <tr class='d-flex'
          *ngFor="let item of roles | search:'erpRoleName,noOfModules,uNoPage':roleSearch | paginate: { itemsPerPage: itemPerPage, currentPage: p } | orderBy: order:reverse:'case-insensitive' let i=index">
          <!-- <td class="col-1 text-center" hidden>{{item.erpRoleCd}}</td> -->
          <td class="col-1 text-center">{{i+1}}</td>
          <td class="col-4 pointerCursor text-left">{{item.erpRoleName}}</td>
          <td class="col-3 pointerCursor text-center">{{item.noOfModules}}</td>
          <td class="col-2 text-center">

              <span class="fa tableIcon pointerCursor" data-toggle="modal" data-target="#userRoleModal" (click)="edit(item)">
                <span class="fa icon-u-edit" ></span>
              </span> 

          </td>
          <td class="col-2 text-center">

            <span class="fa tableIcon pointerCursor" data-toggle="modal" data-target="#dUserRoleModal" (click)="delete(item)">
              <span class="fa icon-u-delete" ></span>
            </span> 

          </td>

          
        </tr>
      </tbody>
    </table>
    
    
    <!-- Pagination Starts -->
    <div class="col-md-12 text-right">
      <div class="paginationBox">
        <pagination-controls (pageChange)="p = $event"></pagination-controls>
      </div>
      <div class="paginationBox">
        <mat-form-field class="pagenateList">
          <mat-select [(ngModel)]="itemPerPage">
            <mat-option value="1">1</mat-option>
            <mat-option value="2">2</mat-option>
            <mat-option value="10">10</mat-option>
            <mat-option value="15">15</mat-option>
            <mat-option value="20">20</mat-option>
            <mat-option value="25">25</mat-option>
            <mat-option value="30">30</mat-option>
            <mat-option value="35">35</mat-option>
            <mat-option value="40">40</mat-option>
            <mat-option value="45">45</mat-option>
            <mat-option value="50">50</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="paginationBox">
        Item per page: &nbsp;&nbsp;
      </div>
    </div>
    <!-- Pagination Ends -->

  </div>
  <!-- end table row -->
</div>
<!---------- Try Template Code Ends ------------>
<br />




<!-- Hidden Table Starts for Excel and CSV files -->
<igx-grid #excelDataContent [data]="excelDataList" [autoGenerate]="false" height="null" width="null" [hidden]="true">
</igx-grid>
<!-- Hidden Table Ends  for Excel and CSV files -->

<!-- Hidden Table for Print and PDF files starts-->
<div class="container mat-elevation-z8 printArea" id="printArea" #exportPDF [hidden]="true">
  <div class="printDiv">

    <!--Start heading table -->
    <table>
      <tr>
        <td width="15%" style="border:none;">
          <img src="../../../assets/images/logo.png" width="135px">
        </td>

        <td style="border:none;">
          <div class="commonCss cssHeading">Logix Solutions</div>
          <div class="commonCss cssAddress">Office #209, 2nd Floor Ahmed Plaza, Rawalpindi Road Fateh Jang.</div>
          <div class="commonCss cssContact">Mobile: 0313-5300471, Ph. 057-2212704</div>
        </td>
      </tr>
    </table>
    <!--End heading table -->

    <br /><br />

    <!--Start table Row-->
    <div class="row">
      <table>
        <thead>
          <tr class="d-flex">
            <th class="col-1 text-center">Sr. #</th>
            <th class="col-4 text-left"> Role Name </th>
            <th class="col-4 text-left"> No. of Modules </th>
            <th class="col-3 text-left"> No. of Pages </th>
          </tr>
        </thead>
        <tbody>
          <tr class="d-flex" *ngFor="let user of rolesData | search:'uRoleName,uNoModule,uNoPage':roleSearch let
            i=index">
            <td class="col-1 text-center">{{i+1}}</td>
            <td class="col-4 text-left">{{user.uRoleName}}</td>
            <td class="col-4 text-left">{{user.uNoModule}}</td>
            <td class="col-3 text-left">{{user.uNoPage}}</td>
          </tr>
        </tbody>
      </table>
    </div><!-- end table row -->
  </div>
</div>
<!-- Hidden Table for Print and PDF files ends-->



<!-- Bootstrap Modal Windows -->

<!-- Start Modal Window to add user role -->
<div class="modal fade" id="userRoleModal">
  <div class="modal-dialog shadow-lg-dark modal-lg">
    <div class="modal-content">

      <!--start user role Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Edit Role Permission</h4>
        <button type="button" class="btn-close cursorPointer" data-dismiss="modal"></button>
      </div>
      <!--end user role Modal Header -->

      <!--start user role Modal body -->
      <div class="modal-body">
        <label [hidden]="true" [(ngModel)]="erpRoleCd" ngDefaultControl></label>

        <div class="row">
          <div class="col-md-5">
            <mat-form-field class="fullwidth">
              <input matInput [(ngModel)]="erpRoleName" placeholder="User Role">
            </mat-form-field>
          </div>
        </div>
        <br />

        <div class="row">

          <div class="col-md-5">
            <h5>Select Module List</h5>
            <p-tree class="fullwidth" [value]="menuTree" selectionMode="checkbox" [(selection)]="selectedMenu"></p-tree>
            <!-- <div><span *ngFor="let file of selectedMenu">{{file.label}}<br/> </span></div> -->
          </div>


          <div class="col-md-2">
            <br /><br />
            
            <div class="btn-Square" (click)="addRoles()"><span class="fa fa-caret-right"></span></div>
            <br/>
            <div class="btn-Square" (click)="removeRoles()"><span class="fa fa-caret-left"></span></div>
            
          </div>


          <div class="col-md-5">
            <h5>Selectd Permissions</h5>
            <p-tree class="fullwidth" [value]="roleTree" selectionMode="checkbox" [(selection)]="selectedRole"></p-tree>
          </div>


        </div>
        <br />

        <div class="row">
          <div class="col-md-12 text-right">
            <button mat-raised-button color="primary" (click)="save()" style="border-radius: 0">&nbsp;&nbsp;&nbsp;Save&nbsp;&nbsp;&nbsp;</button>
          </div>
        </div>
      </div>
      <!--end user role Modal body -->

      <!--start user role Modal footer -->
      <!--end user role Modal footer -->

    </div>
  </div>
</div>
<!-- End Modal Window to user role permissions -->

<!-- Start Modal Window to add user role -->
<div class="modal fade" id="userRolePrmsnModal">
  <div class="modal-dialog shadow-lg-dark modal-lg">
    <div class="modal-content">

      <!--start user role Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">User Role Permission</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <!--end user role Modal Header -->

      <!--start user role Modal body -->
      <div class="modal-body">
        <label [hidden]="true" [(ngModel)]="erpRoleCd" ngDefaultControl></label>

        <div class="row">
          <div class="col-md-10">
            <mat-form-field class="example-full-width">
              <input matInput [(ngModel)]="erpRoleName" placeholder="Role Name" readonly="true">
            </mat-form-field>
          </div>
        </div>
        <br />
        <div class="row">
          <div class="col-md-12">
            <mat-form-field class="example-full-width">
              <mat-select placeholder="Select Module" [(ngModel)]="cmbModule" required>
                <!-- <mat-option *ngFor="let module of getFilterModule()" [value]="module.erpobjctCd"> -->
                <mat-option *ngFor="let item of getFilterModule()" [value]="item.erpObjctCd">
                  {{ item.erpObjctName }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <br />
        <!--Start table Row-->
        <div class="row">
          <div class="col-md-12">
            <table class="table table-striped fullwidth allBorder">
              <thead>
                <tr class="d-flex">
                  <th class="col-1 text-center pointerCursor" (click)="setOrder('uId')">
                    Sr No. <span *ngIf="order =='uId'" [hidden]="reverse" class="fa fa-long-arrow-down"></span> <span
                      *ngIf="order =='uId'" [hidden]="!reverse" class="fa fa-long-arrow-up"></span>
                  </th>
                  <th class="col-3 pointerCursor active" (click)="setOrder('uName')">
                    Menu Name <span *ngIf="order =='uName'" [hidden]="reverse" class="fa fa-long-arrow-down"></span>
                    <span *ngIf="order =='uName'" [hidden]="!reverse" class="fa fa-long-arrow-up"></span>
                  </th>
                  <th class="col-2 pointerCursor text-center" (click)="setOrder('uEmail')">
                    Addition <span *ngIf="order =='uEmail'" [hidden]="reverse" class="fa fa-long-arrow-down"></span>
                    <span *ngIf="order =='uEmail'" [hidden]="!reverse" class="fa fa-long-arrow-up"></span>
                  </th>
                  <th class="col-2 pointerCursor text-center" (click)="setOrder('uRole')">
                    Updation <span *ngIf="order =='uRole'" [hidden]="reverse" class="fa fa-long-arrow-down"></span>
                    <span *ngIf="order =='uRole'" [hidden]="!reverse" class="fa fa-long-arrow-up"></span>
                  </th>
                  <th class="col-2 pointerCursor text-center" (click)="setOrder('uSince')">
                    Deletion <span *ngIf="order =='uSince'" [hidden]="reverse" class="fa fa-long-arrow-down"></span>
                    <span *ngIf="order =='uSince'" [hidden]="!reverse" class="fa fa-long-arrow-up"></span>
                  </th>
                  <th class="col-2 pointerCursor text-center" (click)="setOrder('uSince')">
                    Pin <span *ngIf="order =='uSince'" [hidden]="reverse" class="fa fa-long-arrow-down"></span>
                    <span *ngIf="order =='uSince'" [hidden]="!reverse" class="fa fa-long-arrow-up"></span>
                  </th>
                </tr>
              </thead>
              <tbody>
                <!-- <tr *ngFor="let item of userDetail | search:'UserName,Email': query" class='d-flex'> -->
                <tr class='d-flex'
                  *ngFor="let item of getFilterMenu(cmbModule) | orderBy: order: reverse: 'case-insensitive'; let i=index">
                  <!-- <tr class='d-flex' *ngFor="let item of employees | orderBy: order: reverse: 'case-insensitive'; let i=index"> -->
                  <!-- <td class="col-1 text-center" hidden>{{item.erpRoleCd}}</td> -->
                  <td class="col-1 text-center">{{i+1}}</td>
                  <td class="col-3">{{item.erpObjctName}}</td>
                  <td class="col-2 pointerCursor text-center">
                    <mat-checkbox [(ngModel)]="item.Addition" class="example-margin"></mat-checkbox>
                  </td>
                  <td class="col-2 pointerCursor text-center">
                    <mat-checkbox [(ngModel)]="item.Updation" class="example-margin"></mat-checkbox>
                  </td>
                  <td class="col-2 text-center">
                    <mat-checkbox [(ngModel)]="item.Deletion" class="example-margin"></mat-checkbox>
                  </td>
                  <td class="col-2 text-center">
                    <mat-checkbox [(ngModel)]="item.Pin" class="example-margin"></mat-checkbox>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <!-- end table row -->
        <br />
        <div class="row">
          <div class="col-md-10">
            <button mat-raised-button color="primary" (click)="savePermission()">Save</button>
          </div>
        </div>
      </div>
      <!--end user role Modal body -->

      <!--start user role Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>
      <!--end user role Modal footer -->

    </div>
  </div>
</div>
<!-- End Modal Window to add user role permissions -->


<!-- Start delete user role Modal Window -->
<div class="modal fade modal-forgot" id="dUserRoleModal">
  <div class="modal-dialog shadow-lg-dark modal-lg modalPopup">
    <div class="modal-content">
  
      <!--Start Action Modal Header -->
      <!-- <div class="modal-header">
        <h4></h4>
        <div>
          <button type="button" class="btn-close cursorPointer" data-dismiss="modal"></button>
        </div>
      </div> -->
      <!--End Action Modal Header -->
      
      <!--start Modal body -->
      <div class="modal-body">
        <!--start 1st row-->
        <div class="row">
          <div class="offset-md-1 col-md-6"><br/>
            <p class="fontWhite"><b>Hi Arshad.Khan</b><br/></p>
            <p class="fontWhite">
              It seems you need to delete this user<br/> 
              role,please enter your Password and<br/> 
              PIN to proceed<br/>
            </p>
  
            <div class="row">
              <div class="col-md-10">
                <div class="inputContainer">
                  <span class="ui-float-label">
                    <input id="float-input" type="password" size="32" pInputText class="fullwidth noneOutLine"> 
                    <label for="float-input">Enter Password</label>
                  </span>
                </div>
              </div>
            </div>
            <!--start conform password row -->
            <div class="row">
              <div class="col-md-7">
                <div class="inputContainer" style="margin-top: 5px;">
                  <span class="ui-float-label">
                    <input id="float-input" type="password" size="32" pInputText class="fullwidth noneOutLine"> 
                    <label for="float-input">Enter PIN</label>
                  </span>              
                </div>        
              </div>
              <div class="col-md-3" style="right: 1.6em; top: 0.4em;">
                <button mat-raised-button color="primary" class="buttonSquare" style="height:80%;">DELETE</button>
              </div>
            </div>
            <!--end conform password row -->
            <!--buttons -->
          </div>
  
          <div class="col-md-5 text-center">
            <br/>
            <img class="mx-auto d-block" src="../../../assets/images/Delete-Large.svg" alt=""  width="80%">
            <br/>
            <h5 class="fontWhite"><b>DELETE USER ROLE</b></h5>
          </div>
  
        </div>
        <!--end 1st row-->
  
      </div>
      <!--end Modal body -->
  
    </div>
  </div>
</div>
  <!-- End reset password Modal Window -->
